<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building an Internal Developer Platform | Suheb Ghare</title>
    <meta name="description" content="Step-by-step guide to building an IDP that reduced deployment time from 4 hours to 15 minutes">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <nav>
            <div class="logo">Suheb Ghare</div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#blog-index">Blog Index</a>
                <a href="https://portfolio.suhebghare.tech" target="_blank">Portfolio</a>
            </div>
        </nav>
    </header>

    <main>
        <a href="index.html" class="back-link">‚Üê Back to Home</a>
        
        <article class="blog-content">
            <div class="blog-header">
                <h1>Building an Internal Developer Platform</h1>
                <div class="blog-meta">Published on December 10, 2024 | 18 min read</div>
            </div>


            <div class="blog-stats">
                <div class="stat-item">
                    <span class="icon">üëÅÔ∏è</span>
                    <span class="count reads-count">855</span>
                    <span class="label">reads</span>
                </div>
                <div class="stat-item">
                    <span class="icon">üëç</span>
                    <span class="count likes-count">414</span>
                    <span class="label">likes</span>
                </div>
                <div class="stat-item">
                    <span class="icon">üëé</span>
                    <span class="count dislikes-count">40</span>
                    <span class="label">dislikes</span>
                </div>
            </div>

            <div class="blog-actions">
                <button class="like-btn" onclick="blogStats.like('building-internal-developer-platform')">üëç Like</button>
                <button class="dislike-btn" onclick="blogStats.dislike('building-internal-developer-platform')">üëé Dislike</button>
            </div>
            <div class="info-box">
                <strong>Real Impact:</strong> Our IDP reduced deployment time from 4 hours to 15 minutes, enabled 50+ teams to self-serve, and improved developer satisfaction from 6.2 to 8.7 (NPS score).
            </div>

            <h2>What Is an Internal Developer Platform?</h2>
            <p>An IDP is a self-service layer that sits between developers and infrastructure. It provides golden paths for common tasks (deploy service, create database, set up monitoring) while hiding complexity.</p>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">94%</div>
                    <div class="metric-label">Faster Deployments</div>
                    <div class="metric-sublabel">4 hours ‚Üí 15 minutes</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">50+</div>
                    <div class="metric-label">Teams Onboarded</div>
                    <div class="metric-sublabel">Self-Service</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">8.7</div>
                    <div class="metric-label">Developer NPS</div>
                    <div class="metric-sublabel">Up from 6.2</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">85%</div>
                    <div class="metric-label">Ticket Reduction</div>
                    <div class="metric-sublabel">Self-Service Adoption</div>
                </div>
            </div>

            <h2>IDP Architecture</h2>

            <div class="flow-diagram">
                <div class="flow-step">
                    <div class="flow-title">Developer Portal (Backstage)</div>
                    <div class="flow-content">Service catalog, docs, self-service actions</div>
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <div class="flow-title">Control Plane (Crossplane)</div>
                    <div class="flow-content">Infrastructure provisioning, resource management</div>
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <div class="flow-title">Deployment (ArgoCD)</div>
                    <div class="flow-content">GitOps-based continuous delivery</div>
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <div class="flow-title">Runtime (Kubernetes)</div>
                    <div class="flow-content">Container orchestration, service mesh</div>
                </div>
                <div class="flow-arrow">‚Üì</div>
                <div class="flow-step">
                    <div class="flow-title">Observability (Grafana Stack)</div>
                    <div class="flow-content">Metrics, logs, traces, alerts</div>
                </div>
            </div>

            <h2>Phase 1: Developer Portal with Backstage</h2>

            <h3>Install Backstage</h3>
            <pre><code>npx @backstage/create-app@latest

cd my-backstage-app
yarn install
yarn dev</code></pre>

            <h3>Service Catalog</h3>
            <pre><code># catalog-info.yaml
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: api-service
  description: User API service
  annotations:
    github.com/project-slug: myorg/api-service
    backstage.io/kubernetes-id: api-service
    backstage.io/techdocs-ref: dir:.
  tags:
    - api
    - nodejs
  links:
    - url: https://api.example.com
      title: Production
    - url: https://grafana.example.com/d/api-service
      title: Dashboards
spec:
  type: service
  lifecycle: production
  owner: team-backend
  system: user-management
  providesApis:
    - user-api
  consumesApis:
    - auth-api
  dependsOn:
    - resource:postgres-db</code></pre>

            <h3>Software Templates</h3>
            <pre><code># templates/nodejs-service/template.yaml
apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: nodejs-service
  title: Node.js Microservice
  description: Create a new Node.js microservice with best practices
spec:
  owner: platform-team
  type: service
  
  parameters:
    - title: Service Information
      required:
        - name
        - owner
      properties:
        name:
          title: Service Name
          type: string
          description: Unique name for your service
        owner:
          title: Owner
          type: string
          description: Team that owns this service
          ui:field: OwnerPicker
        port:
          title: Port
          type: number
          default: 8080
  
  steps:
    - id: fetch-base
      name: Fetch Base Template
      action: fetch:template
      input:
        url: ./skeleton
        values:
          name: ${{ parameters.name }}
          owner: ${{ parameters.owner }}
          port: ${{ parameters.port }}
    
    - id: publish
      name: Publish to GitHub
      action: publish:github
      input:
        allowedHosts: ['github.com']
        description: ${{ parameters.name }}
        repoUrl: github.com?owner=myorg&repo=${{ parameters.name }}
    
    - id: register
      name: Register Component
      action: catalog:register
      input:
        repoContentsUrl: ${{ steps.publish.output.repoContentsUrl }}
        catalogInfoPath: '/catalog-info.yaml'
    
    - id: create-argocd-app
      name: Create ArgoCD Application
      action: argocd:create-app
      input:
        name: ${{ parameters.name }}
        namespace: production
        repoUrl: ${{ steps.publish.output.remoteUrl }}
  
  output:
    links:
      - title: Repository
        url: ${{ steps.publish.output.remoteUrl }}
      - title: Open in catalog
        icon: catalog
        entityRef: ${{ steps.register.output.entityRef }}</code></pre>

            <h2>Phase 2: Infrastructure as Code with Crossplane</h2>

            <h3>Install Crossplane</h3>
            <pre><code>helm repo add crossplane-stable https://charts.crossplane.io/stable
helm install crossplane crossplane-stable/crossplane \
  --namespace crossplane-system \
  --create-namespace</code></pre>

            <h3>Composite Resource Definitions</h3>
            <pre><code>apiVersion: apiextensions.crossplane.io/v1
kind: CompositeResourceDefinition
metadata:
  name: xpostgresdatabases.platform.example.com
spec:
  group: platform.example.com
  names:
    kind: XPostgresDatabase
    plural: xpostgresdatabases
  claimNames:
    kind: PostgresDatabase
    plural: postgresdatabases
  versions:
  - name: v1alpha1
    served: true
    referenceable: true
    schema:
      openAPIV3Schema:
        type: object
        properties:
          spec:
            type: object
            properties:
              parameters:
                type: object
                properties:
                  size:
                    type: string
                    enum: [small, medium, large]
                  environment:
                    type: string
                    enum: [dev, staging, production]
                required:
                  - size
                  - environment
            required:
              - parameters
---
apiVersion: apiextensions.crossplane.io/v1
kind: Composition
metadata:
  name: postgres-aws
spec:
  compositeTypeRef:
    apiVersion: platform.example.com/v1alpha1
    kind: XPostgresDatabase
  
  resources:
  - name: rds-instance
    base:
      apiVersion: rds.aws.upbound.io/v1beta1
      kind: Instance
      spec:
        forProvider:
          region: us-east-1
          engine: postgres
          engineVersion: "15.4"
          instanceClass: db.t3.micro
          allocatedStorage: 20
          storageEncrypted: true
          publiclyAccessible: false
    
    patches:
    - type: FromCompositeFieldPath
      fromFieldPath: spec.parameters.size
      toFieldPath: spec.forProvider.instanceClass
      transforms:
      - type: map
        map:
          small: db.t3.micro
          medium: db.t3.small
          large: db.t3.medium
    
    - type: FromCompositeFieldPath
      fromFieldPath: spec.parameters.environment
      toFieldPath: spec.forProvider.tags.Environment</code></pre>

            <h3>Developer Claims Database</h3>
            <pre><code>apiVersion: platform.example.com/v1alpha1
kind: PostgresDatabase
metadata:
  name: my-app-db
  namespace: production
spec:
  parameters:
    size: medium
    environment: production
  writeConnectionSecretToRef:
    name: my-app-db-credentials</code></pre>

            <h2>Phase 3: GitOps with ArgoCD</h2>

            <h3>Application Template</h3>
            <pre><code>apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: api-service
  namespace: argocd
spec:
  project: default
  
  source:
    repoURL: https://github.com/myorg/api-service
    targetRevision: main
    path: k8s/overlays/production
  
  destination:
    server: https://kubernetes.default.svc
    namespace: production
  
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
    - CreateNamespace=true
  
  ignoreDifferences:
  - group: apps
    kind: Deployment
    jsonPointers:
    - /spec/replicas</code></pre>

            <h3>ApplicationSet for Multi-Environment</h3>
            <pre><code>apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: api-service
  namespace: argocd
spec:
  generators:
  - list:
      elements:
      - env: dev
        cluster: dev-cluster
      - env: staging
        cluster: staging-cluster
      - env: production
        cluster: prod-cluster
  
  template:
    metadata:
      name: 'api-service-{{env}}'
    spec:
      project: default
      source:
        repoURL: https://github.com/myorg/api-service
        targetRevision: main
        path: 'k8s/overlays/{{env}}'
      destination:
        server: '{{cluster}}'
        namespace: '{{env}}'
      syncPolicy:
        automated:
          prune: true
          selfHeal: true</code></pre>

            <h2>Phase 4: Observability Stack</h2>

            <h3>Automatic Instrumentation</h3>
            <pre><code>apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-service
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/port: "8080"
    prometheus.io/path: "/metrics"
spec:
  template:
    metadata:
      annotations:
        sidecar.opentelemetry.io/inject: "true"
    spec:
      containers:
      - name: api
        image: api-service:v1.0.0
        env:
        - name: OTEL_SERVICE_NAME
          value: api-service
        - name: OTEL_EXPORTER_OTLP_ENDPOINT
          value: http://otel-collector:4317</code></pre>

            <h3>Pre-configured Dashboards</h3>
            <pre><code>apiVersion: v1
kind: ConfigMap
metadata:
  name: service-dashboard
  namespace: monitoring
  labels:
    grafana_dashboard: "1"
data:
  service-dashboard.json: |
    {
      "dashboard": {
        "title": "Service Overview - ${service_name}",
        "panels": [
          {
            "title": "Request Rate",
            "targets": [{
              "expr": "rate(http_requests_total{service=\"${service_name}\"}[5m])"
            }]
          },
          {
            "title": "Error Rate",
            "targets": [{
              "expr": "rate(http_requests_total{service=\"${service_name}\",status=~\"5..\"}[5m])"
            }]
          },
          {
            "title": "P99 Latency",
            "targets": [{
              "expr": "histogram_quantile(0.99, rate(http_request_duration_seconds_bucket{service=\"${service_name}\"}[5m]))"
            }]
          }
        ]
      }
    }</code></pre>

            <h2>Phase 5: CLI Tool</h2>

            <h3>Platform CLI</h3>
            <pre><code>#!/usr/bin/env python3
import click
import requests

@click.group()
def cli():
    """Platform CLI for developers"""
    pass

@cli.command()
@click.option('--name', required=True, help='Service name')
@click.option('--port', default=8080, help='Service port')
@click.option('--env', default='dev', help='Environment')
def deploy(name, port, env):
    """Deploy a new service"""
    click.echo(f"Deploying {name} to {env}...")
    
    # Create service from template
    response = requests.post(
        'https://backstage.example.com/api/scaffolder/v2/tasks',
        json={
            'templateRef': 'template:default/nodejs-service',
            'values': {
                'name': name,
                'port': port,
                'environment': env
            }
        }
    )
    
    task_id = response.json()['id']
    click.echo(f"Task created: {task_id}")
    click.echo(f"View progress: https://backstage.example.com/create/tasks/{task_id}")

@cli.command()
@click.option('--name', required=True, help='Service name')
def logs(name):
    """View service logs"""
    click.echo(f"Fetching logs for {name}...")
    # Implementation

@cli.command()
@click.option('--name', required=True, help='Service name')
def status(name):
    """Check service status"""
    click.echo(f"Checking status of {name}...")
    # Implementation

if __name__ == '__main__':
    cli()</code></pre>

            <h2>Golden Paths</h2>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Use Case</th>
                        <th>Template</th>
                        <th>Includes</th>
                        <th>Time to Deploy</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>REST API</strong></td>
                        <td>nodejs-api</td>
                        <td>Express, OpenAPI, tests, CI/CD</td>
                        <td>15 minutes</td>
                    </tr>
                    <tr>
                        <td><strong>Background Job</strong></td>
                        <td>worker-service</td>
                        <td>Queue consumer, retry logic, monitoring</td>
                        <td>10 minutes</td>
                    </tr>
                    <tr>
                        <td><strong>Cron Job</strong></td>
                        <td>scheduled-job</td>
                        <td>CronJob manifest, logging, alerting</td>
                        <td>5 minutes</td>
                    </tr>
                    <tr>
                        <td><strong>Static Website</strong></td>
                        <td>static-site</td>
                        <td>S3 + CloudFront, CI/CD</td>
                        <td>10 minutes</td>
                    </tr>
                </tbody>
            </table>

            <h2>Self-Service Actions</h2>

            <h3>Common Developer Tasks</h3>
            <ul>
                <li>‚úÖ Deploy new service (15 min)</li>
                <li>‚úÖ Create database (5 min)</li>
                <li>‚úÖ Set up monitoring (automatic)</li>
                <li>‚úÖ Configure secrets (2 min)</li>
                <li>‚úÖ Scale replicas (1 min)</li>
                <li>‚úÖ View logs (instant)</li>
                <li>‚úÖ Rollback deployment (2 min)</li>
                <li>‚úÖ Create staging environment (10 min)</li>
            </ul>

            <h2>Measuring Success</h2>

            <h3>Before IDP</h3>
            <ul>
                <li>Time to first deploy: 4 hours</li>
                <li>Platform team tickets: 200/month</li>
                <li>Developer NPS: 6.2</li>
                <li>Deployment frequency: 2/week per team</li>
                <li>Onboarding time: 2 weeks</li>
            </ul>

            <h3>After IDP</h3>
            <ul>
                <li>Time to first deploy: 15 minutes (94% faster)</li>
                <li>Platform team tickets: 30/month (85% reduction)</li>
                <li>Developer NPS: 8.7 (40% improvement)</li>
                <li>Deployment frequency: 10/day per team (70x increase)</li>
                <li>Onboarding time: 1 day (93% faster)</li>
            </ul>

            <h2>Implementation Roadmap</h2>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Phase</th>
                        <th>Duration</th>
                        <th>Deliverables</th>
                        <th>Team Size</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Phase 1: Portal</strong></td>
                        <td>4 weeks</td>
                        <td>Backstage, service catalog, 1 template</td>
                        <td>2 engineers</td>
                    </tr>
                    <tr>
                        <td><strong>Phase 2: IaC</strong></td>
                        <td>6 weeks</td>
                        <td>Crossplane, database provisioning</td>
                        <td>3 engineers</td>
                    </tr>
                    <tr>
                        <td><strong>Phase 3: GitOps</strong></td>
                        <td>4 weeks</td>
                        <td>ArgoCD, automated deployments</td>
                        <td>2 engineers</td>
                    </tr>
                    <tr>
                        <td><strong>Phase 4: Observability</strong></td>
                        <td>4 weeks</td>
                        <td>Auto-instrumentation, dashboards</td>
                        <td>2 engineers</td>
                    </tr>
                    <tr>
                        <td><strong>Phase 5: Polish</strong></td>
                        <td>4 weeks</td>
                        <td>CLI, docs, training</td>
                        <td>3 engineers</td>
                    </tr>
                </tbody>
            </table>

            <h2>Results</h2>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">94%</div>
                    <div class="metric-label">Faster Deployments</div>
                    <div class="metric-sublabel">4 hrs ‚Üí 15 min</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">50+</div>
                    <div class="metric-label">Teams Onboarded</div>
                    <div class="metric-sublabel">Self-Service</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">8.7</div>
                    <div class="metric-label">Developer NPS</div>
                    <div class="metric-sublabel">Up from 6.2</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">85%</div>
                    <div class="metric-label">Ticket Reduction</div>
                    <div class="metric-sublabel">200 ‚Üí 30/month</div>
                </div>
            </div>

            <h2>Key Takeaways</h2>
            <ul>
                <li>IDP reduces deployment time from hours to minutes</li>
                <li>Backstage provides developer portal and service catalog</li>
                <li>Crossplane enables self-service infrastructure provisioning</li>
                <li>ArgoCD automates GitOps-based deployments</li>
                <li>Golden paths cover 80% of use cases with opinionated defaults</li>
                <li>Self-service reduces platform team tickets by 85%</li>
                <li>Developer satisfaction improves by 40% (NPS 6.2 ‚Üí 8.7)</li>
            </ul>

            <div class="info-box">
                <strong>Production Tip:</strong> Start with Phase 1 (Backstage + 1 template). Get 5 teams using it successfully before expanding. Gather feedback weekly. Build what developers actually need, not what you think they need. Measure time-to-first-deploy and developer NPS.
            </div>
        </article>
    </main>

    <footer>
        <p>&copy; 2024 Suheb Ghare. All rights reserved.</p>
    </footer>

    <script src="blog-stats.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', function() {
            blogStats.updateDisplay('building-internal-developer-platform');
            blogStats.incrementRead('building-internal-developer-platform');
        });
    </script>
</body>
</html>